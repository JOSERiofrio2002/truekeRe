<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Accesibilidad</title>
    <link href="/assets/css/accessibility-menu.css" rel="stylesheet">
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
        }
        .test-section {
            margin: 20px 0;
            padding: 15px;
            border-left: 4px solid #0066cc;
            background-color: #f9f9f9;
        }
        .test-section h2 {
            margin-top: 0;
        }
        .console-output {
            background-color: #000;
            color: #0f0;
            padding: 10px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            max-height: 200px;
            overflow-y: auto;
            margin-top: 10px;
        }
        .console-output p {
            margin: 2px 0;
            font-size: 12px;
        }
        button {
            padding: 10px 15px;
            margin: 5px;
            background-color: #0066cc;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
        }
        button:hover {
            background-color: #0052a3;
        }
        .status {
            display: inline-block;
            padding: 8px 12px;
            border-radius: 4px;
            font-weight: bold;
            margin-top: 10px;
        }
        .status.success {
            background-color: #4caf50;
            color: white;
        }
        .status.error {
            background-color: #f44336;
            color: white;
        }
        .status.info {
            background-color: #2196f3;
            color: white;
        }
    </style>
</head>
<body>
    <!-- Men√∫ de Accesibilidad -->
    <div id="accessibility-menu" class="accessibility-menu" role="region" aria-label="Herramientas de accesibilidad"><button id="accessibility-toggle" class="accessibility-toggle" aria-label="Abrir herramientas de accesibilidad" aria-expanded="false" aria-controls="accessibility-panel"><span class="accessibility-icon">‚ôø</span></button><div id="accessibility-panel" class="accessibility-panel" hidden><div class="accessibility-header"><h2>Herramientas de accesibilidad</h2><button id="accessibility-close" class="accessibility-close" aria-label="Cerrar men√∫ de accesibilidad"><span aria-hidden="true">&times;</span></button></div><div class="accessibility-content"><div class="accessibility-section"><h3>Tama√±o de texto</h3><div class="accessibility-group"><button id="text-increase" class="accessibility-btn" aria-label="Aumentar tama√±o de texto"><span class="btn-icon">A+</span><span class="btn-label">Aumentar texto</span></button><button id="text-decrease" class="accessibility-btn" aria-label="Disminuir tama√±o de texto"><span class="btn-icon">A-</span><span class="btn-label">Disminuir texto</span></button><div class="text-size-display"><span>Tama√±o: <span id="current-text-size">100%</span></span></div></div></div><div class="accessibility-section"><h3>Contraste y colores</h3><div class="accessibility-group"><button id="grayscale-toggle" class="accessibility-btn" aria-label="Activar modo escala de grises" aria-pressed="false"><span class="btn-icon">‚ö´‚ö™</span><span class="btn-label">Escala de grises</span></button><button id="high-contrast-toggle" class="accessibility-btn" aria-label="Activar alto contraste" aria-pressed="false"><span class="btn-icon">‚óÜ</span><span class="btn-label">Alto contraste</span></button><button id="negative-contrast-toggle" class="accessibility-btn" aria-label="Activar contraste negativo" aria-pressed="false"><span class="btn-icon">‚¨ú‚¨õ</span><span class="btn-label">Contraste negativo</span></button></div></div><div class="accessibility-section"><h3>Fondo</h3><div class="accessibility-group"><button id="light-background-toggle" class="accessibility-btn" aria-label="Activar fondo claro" aria-pressed="false"><span class="btn-icon">‚òÄÔ∏è</span><span class="btn-label">Fondo claro</span></button></div></div><div class="accessibility-section"><h3>Enlaces</h3><div class="accessibility-group"><button id="underline-links-toggle" class="accessibility-btn" aria-label="Subrayar enlaces" aria-pressed="false"><span class="btn-icon">UÃ≤</span><span class="btn-label">Enlaces subrayados</span></button></div></div><div class="accessibility-section"><h3>Fuente</h3><div class="accessibility-group"><button id="readable-font-toggle" class="accessibility-btn" aria-label="Usar fuente legible" aria-pressed="false"><span class="btn-icon">„Ñ±</span><span class="btn-label">Fuente legible</span></button></div></div><div class="accessibility-section"><h3>Lectura en voz alta</h3><div class="accessibility-group"><button id="read-page-btn" class="accessibility-btn" aria-label="Leer p√°gina en voz alta"><span class="btn-icon">üîä</span><span class="btn-label">Leer p√°gina</span></button><button id="stop-reading-btn" class="accessibility-btn" aria-label="Detener lectura en voz alta" disabled><span class="btn-icon">‚èπÔ∏è</span><span class="btn-label">Detener lectura</span></button></div><div class="speech-controls"><label for="speech-rate">Velocidad de lectura:</label><input type="range" id="speech-rate" class="speech-rate-slider" min="0.5" max="2" step="0.1" value="1" aria-label="Controlar velocidad de lectura"><span id="speech-rate-display">1.0x</span></div></div><div class="accessibility-section"><h3>Preferencias</h3><div class="accessibility-group"><button id="reset-settings" class="accessibility-btn accessibility-btn-danger" aria-label="Restablecer todos los cambios de accesibilidad"><span class="btn-icon">üîÑ</span><span class="btn-label">Restablecer cambios</span></button></div></div></div><div class="accessibility-footer"><small>Tus preferencias se guardan autom√°ticamente</small></div></div></div>

    <div class="container">
        <h1>üß™ Test de Men√∫ de Accesibilidad</h1>

        <div class="test-section">
            <h2>1. Verificaci√≥n del DOM</h2>
            <button onclick="testDOMElements()">Verificar Elementos</button>
            <div id="dom-test" class="console-output"></div>
        </div>

        <div class="test-section">
            <h2>2. Verificaci√≥n de CSS</h2>
            <button onclick="testCSS()">Verificar CSS</button>
            <div id="css-test" class="console-output"></div>
        </div>

        <div class="test-section">
            <h2>3. Prueba del Toggle</h2>
            <button onclick="testToggle()">Hacer Click en Toggle</button>
            <div id="toggle-test" class="console-output"></div>
        </div>

        <div class="test-section">
            <h2>4. Consola en Vivo</h2>
            <div id="live-console" class="console-output" style="height: 300px;"></div>
        </div>
    </div>

    <script>
        // Capturar console.log
        const liveConsole = document.getElementById('live-console');
        const originalLog = console.log;
        
        console.log = function(...args) {
            originalLog.apply(console, args);
            const message = args.map(arg => 
                typeof arg === 'object' ? JSON.stringify(arg, null, 2) : String(arg)
            ).join(' ');
            
            const p = document.createElement('p');
            p.textContent = `> ${message}`;
            liveConsole.appendChild(p);
            liveConsole.scrollTop = liveConsole.scrollHeight;
        };

        function addLog(elementId, message) {
            const element = document.getElementById(elementId);
            const p = document.createElement('p');
            p.textContent = message;
            element.appendChild(p);
        }

        function testDOMElements() {
            const domTest = document.getElementById('dom-test');
            domTest.innerHTML = '';

            const toggle = document.getElementById('accessibility-toggle');
            const panel = document.getElementById('accessibility-panel');
            const closeBtn = document.getElementById('accessibility-close');

            addLog('dom-test', toggle ? '‚úì Toggle button found' : '‚úó Toggle button NOT found');
            addLog('dom-test', panel ? '‚úì Panel found' : '‚úó Panel NOT found');
            addLog('dom-test', closeBtn ? '‚úì Close button found' : '‚úó Close button NOT found');
            addLog('dom-test', `Panel hidden attribute: ${panel?.hidden}`);
            addLog('dom-test', `Toggle aria-expanded: ${toggle?.getAttribute('aria-expanded')}`);
        }

        function testCSS() {
            const cssTest = document.getElementById('css-test');
            cssTest.innerHTML = '';

            const toggle = document.getElementById('accessibility-toggle');
            const menu = document.getElementById('accessibility-menu');
            
            const toggleStyle = window.getComputedStyle(toggle);
            const menuStyle = window.getComputedStyle(menu);

            addLog('css-test', `Toggle display: ${toggleStyle.display}`);
            addLog('css-test', `Toggle position: ${toggleStyle.position}`);
            addLog('css-test', `Toggle width: ${toggleStyle.width}`);
            addLog('css-test', `Toggle height: ${toggleStyle.height}`);
            addLog('css-test', `Toggle background-color: ${toggleStyle.backgroundColor}`);
            addLog('css-test', `Menu z-index: ${menuStyle.zIndex}`);
            addLog('css-test', `Menu position: ${menuStyle.position}`);
        }

        function testToggle() {
            const toggleTest = document.getElementById('toggle-test');
            toggleTest.innerHTML = '';

            const toggle = document.getElementById('accessibility-toggle');
            const panel = document.getElementById('accessibility-panel');

            addLog('toggle-test', `Panel hidden BEFORE: ${panel.hidden}`);
            
            toggle.click();
            
            setTimeout(() => {
                addLog('toggle-test', `Panel hidden AFTER: ${panel.hidden}`);
                addLog('toggle-test', `Toggle aria-expanded: ${toggle.getAttribute('aria-expanded')}`);
                
                if (window.accessibilityManager) {
                    addLog('toggle-test', '‚úì AccessibilityManager exists');
                } else {
                    addLog('toggle-test', '‚úó AccessibilityManager NOT found');
                }
            }, 100);
        }
    </script>
    <script src="/assets/js/accessibility.js"></script>
</body>
</html>
