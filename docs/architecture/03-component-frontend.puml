@startuml Truekealo_Component_Frontend
!theme plain
title Diagrama de Componentes (C4 Level 3) - Frontend Web

'Definición de estilos
skinparam {
    BackgroundColor white
    ComponentBackgroundColor #E8F5E9
    PackageBackgroundColor #FFF9C4
}

package "Frontend Web Application" {
    
    package "Core JavaScript Modules" #FFF9C4 {
        component "api-client.js" as APIClient {
            [HTTPClient]
            [TokenManager]
            [AuthAPI]
            [ArticulosAPI]
            [PropuestasAPI]
        }
        
        component "app.js" as AppCore {
            [DarkModeManager]
            [FormHandler]
            [NavigationHandler]
            [ModalManager]
            [Toast]
        }
        
        component "config.js" as Config {
            [Configuración Global]
            [Constantes]
        }
    }
    
    package "HTML Templates" #E8F5E9 {
        component "login.html" as Login
        component "crear-cuenta.html" as Register
        component "dashboard.html" as Dashboard
        component "explorar.html" as Explorar
        component "mis-articulos.html" as MisArticulos
        component "publicar.html" as Publicar
        component "propuesta-intercambio.html" as Propuestas
        component "perfil.html" as Perfil
        component "configuracion.html" as Configuracion
    }
    
    package "Styles" #FFE0B2 {
        component "app.css" as CSS {
            [Base Styles]
            [Components]
            [Utilities]
            [Dark Mode]
        }
        
        component "Tailwind CSS" as Tailwind {
            [CDN]
            [Custom Config]
        }
    }
    
    package "Shared Components" #E1F5FE {
        component "sidebar.html" as Sidebar
        component "head-meta.html" as HeadMeta
        component "footer-scripts.html" as FooterScripts
    }
}

'Relaciones
Login --> APIClient : usa AuthAPI
Register --> APIClient : usa AuthAPI
Dashboard --> APIClient : usa todas las APIs
Explorar --> APIClient : usa ArticulosAPI
MisArticulos --> APIClient : usa ArticulosAPI
Publicar --> APIClient : usa ArticulosAPI
Propuestas --> APIClient : usa PropuestasAPI
Perfil --> APIClient : usa AuthAPI

'Todas las páginas usan app.js
Login --> AppCore : utiliza
Dashboard --> AppCore : utiliza
Explorar --> AppCore : utiliza

'Todas las páginas usan CSS
Login --> CSS : aplica estilos
Login --> Tailwind : usa clases
Dashboard --> CSS : aplica estilos
Dashboard --> Tailwind : usa clases

'Componentes compartidos
Dashboard --> Sidebar : incluye
Explorar --> Sidebar : incluye
MisArticulos --> Sidebar : incluye

'APIClient se comunica con backend
APIClient ..> "Backend API" : HTTP/REST\nJSON

'Notas explicativas
note right of APIClient
    **Responsabilidades:**
    - Comunicación con API
    - Gestión de tokens JWT
    - Manejo de errores HTTP
    - Caché de datos
    
    **Patrón:** Singleton
    **Formato:** JSON
end note

note right of AppCore
    **Responsabilidades:**
    - Gestión de UI
    - Validación de formularios
    - Interacciones del usuario
    - Utilidades comunes
    
    **Patrón:** Module Pattern
end note

note bottom of Login
    **Flujo de Login:**
    1. Usuario ingresa credenciales
    2. APIClient.Auth.login()
    3. Guarda token JWT
    4. Redirige a dashboard
end note

@enduml
